---
title: "LittleLight 3"
author: "Joy"
date: "2019-03-18" #格式使用'-'
comment: true #開放留言
tags: ['lope'] #文章 tag
mysite: /joy/ #Joy 連結
isRmd: true
---

<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<div class="section level2">
<h2>前情提要</h2>
<p>把這件事的緣起說得簡單一點就是在 Lope 團隊中被啟發，學著做一點資料科學相關的練習與紀錄。 ：）</p>
<div id="littlelight-" class="section level4">
<h4>LittleLight 成長咒語</h4>
<ol style="list-style-type: decimal">
<li>自己開燈照路慢慢走，輕鬆寫、用心記，好玩很重要。<br />
</li>
<li>每次只能走一小小步，不要被自己打敗。</li>
</ol>
</div>
<div class="section level4">
<h4>資料&amp;提問的重點資訊</h4>
<ul>
<li>主要提問：這些年來大家是否對語言學的了解多更多了呢？<br />
</li>
<li>回應方式：分析歷年語奧報名表中必答題「<em>請用幾句話形容你/妳對語言學的瞭解</em>」的資料。<br />
</li>
<li>已有進度：完成原始檔案建立、讀檔、斷詞並加入停用字表、建立詞頻表。</li>
</ul>
</div>
</div>
<div class="section level2">
<h2>小小的第三步</h2>
<p>延續上一週，目前都只是在清資料的迴旋中，一直繞啊繞阿繞～<br />
很真切地體會到清資料、把資料清乾淨這點真的滿重要的！畢竟，若連要處理的資料是什麼類型、有什麼特性都不知道的話，接下來一切就會有點麻煩了。 <del>其實我也是碰到了才回頭清資料的</del></p>
<p>小小的第三步是只抽出資料中的中文字詞，去除全英文字詞。<br />
因此，可以預期結果應該會是 <strong>詞頻表中的英文字會完全被除去</strong> 。 立刻來試一下～</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#讀取原始資料</span>
comling &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="st">&#39;com_ling.csv&#39;</span>)

<span class="co">#由於每個欄位不等長，故分別定義成四個變數，以利後續操作。</span>
TOL2019 &lt;-<span class="st"> </span>comling[[<span class="dv">1</span>]]
TOL2018 &lt;-<span class="st"> </span>comling[[<span class="dv">2</span>]]
TOL2017 &lt;-<span class="st"> </span>comling[[<span class="dv">3</span>]]
TOL2016 &lt;-<span class="st"> </span>comling[[<span class="dv">4</span>]]

<span class="co">#使用 grep() 來找英文開頭的資料 （回傳 index 值）</span>
<span class="kw">grep</span>(<span class="st">&quot;^[A-Za-z</span><span class="ch">\\</span><span class="st">,’ .!&#39;</span><span class="ch">\n</span><span class="st">]&quot;</span>, TOL2019)</code></pre>
<pre><code>#&gt; [1]  25 105 217 226 231 251 256</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#檢查英文開頭的資料</span>
TOL2019[<span class="kw">grep</span>(<span class="st">&quot;^[A-Za-z</span><span class="ch">\\</span><span class="st">,’ .!&#39;</span><span class="ch">\n</span><span class="st">]&quot;</span>, TOL2019)]</code></pre>
<pre><code>#&gt; [1] Although I haven’t had much experience with linguistics but I’m eager to learn!                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
#&gt; [2] science of language                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               
#&gt; [3] Eww, linguistics                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
#&gt; [4] Linguistics is the study of language and its structure. Branches include, but are not limited to, phonetics, phonology, morphology, syntax, semantics, and pragmatics. This is what has built human knowledge and behaviour and will continue building it, as AI is expanding and we continue exploring the origins and nature of language, while trying to preserve and record it.\n（因為女兒中文讀寫不太會,故用英文回答)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       
#&gt; [5] I started to learn English from the age of three, so I considered it as my second language. I studied in a bilingual school during my elementary and middle school year. As I entered an international school in tenth grade, I found out that knowing English and Chinese isn&#39;t enough. I decided to learn Spanish to further enhance my global view. In eleventh grade, one of my middle school classmate post on Facebook about IOL, which motivated me to take the examination. I&#39;m surprised that I am given this opportunity to participate in the training session last year. Through the session, I learned that language isn&#39;t literally a communicating tool, it means something more than that. I learned how to identify different language by analyzing the clues provided, which improves my logistics skill. Even though I&#39;m not chosen to attend the international competition held in the Czech Republic, I still cherished this experience, and I hope I can succeed this year. 
#&gt; [6]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   
#&gt; [7] I know how to guess the meanings of words I&#39;m not really familiar with                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
#&gt; 249 Levels:   ...</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#以 gsub 直接將英文與標點符號取代為空白＆確認資料型態</span>
clean2019 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="dt">pattern =</span><span class="st">&quot;[A-Za-z</span><span class="ch">\\</span><span class="st">,’ .!&#39;</span><span class="ch">\n</span><span class="st">]&quot;</span>, <span class="st">&quot;&quot;</span>, TOL2019)
<span class="kw">mode</span>(clean2019)</code></pre>
<pre><code>#&gt; [1] &quot;character&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#對 TOL2016~2018 重複做同樣的動作</span>
clean2018 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="dt">pattern =</span><span class="st">&quot;[A-Za-z</span><span class="ch">\\</span><span class="st">,’ .!&#39;</span><span class="ch">\n</span><span class="st">]&quot;</span>, <span class="st">&quot;&quot;</span>, TOL2018)
clean2017 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="dt">pattern =</span><span class="st">&quot;[A-Za-z</span><span class="ch">\\</span><span class="st">,’ .!&#39;</span><span class="ch">\n</span><span class="st">]&quot;</span>, <span class="st">&quot;&quot;</span>, TOL2017)
clean2016 &lt;-<span class="st"> </span><span class="kw">gsub</span>(<span class="dt">pattern =</span><span class="st">&quot;[A-Za-z</span><span class="ch">\\</span><span class="st">,’ .!&#39;</span><span class="ch">\n</span><span class="st">]&quot;</span>, <span class="st">&quot;&quot;</span>, TOL2016)</code></pre>
<p>清完了英文字，接下來就是斷詞並製作詞頻表啦~~~ 這次多加了輸出為 csv 檔案的步驟，希望之後會用到。</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#準備使用jiebaR斷詞</span>
<span class="kw">library</span>(jiebaR)

<span class="co">#定義分詞引擎，在這邊就先加入停用字表</span>
segger &lt;-<span class="st"> </span><span class="kw">worker</span>(<span class="dt">stop_word =</span> <span class="st">&quot;stopword.txt&quot;</span>)

<span class="co">#進行斷詞（將 char. 轉為 Strings 方能進行）</span>
cleanseg2019 &lt;-<span class="st"> </span>segger[<span class="kw">toString</span>(clean2019)]

<span class="co">#建立詞頻表</span>
wfTOL2019 &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">sort</span>(<span class="kw">table</span>(cleanseg2019), <span class="dt">decreasing =</span> T))

<span class="co">#存檔</span>
<span class="kw">write.csv</span>(wfTOL2019, <span class="dt">file =</span> <span class="st">&quot;wfTOL2019.csv&quot;</span>)

<span class="co">#如法炮製，製作clean2016~2018 的詞頻表並存檔</span>
cleanseg2016 &lt;-<span class="st"> </span>segger[<span class="kw">toString</span>(clean2016)]
wfTOL2016 &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">sort</span>(<span class="kw">table</span>(cleanseg2016), <span class="dt">decreasing =</span> T))
<span class="kw">write.csv</span>(wfTOL2016, <span class="dt">file =</span> <span class="st">&quot;wfTOL2016.csv&quot;</span>)

cleanseg2017 &lt;-<span class="st"> </span>segger[<span class="kw">toString</span>(clean2017)]
wfTOL2017 &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">sort</span>(<span class="kw">table</span>(cleanseg2017), <span class="dt">decreasing =</span> T))
<span class="kw">write.csv</span>(wfTOL2017, <span class="dt">file =</span> <span class="st">&quot;wfTOL2017.csv&quot;</span>)

cleanseg2018 &lt;-<span class="st"> </span>segger[<span class="kw">toString</span>(clean2018)]
wfTOL2018 &lt;-<span class="st"> </span><span class="kw">as.data.frame</span>(<span class="kw">sort</span>(<span class="kw">table</span>(cleanseg2018), <span class="dt">decreasing =</span> T))
<span class="kw">write.csv</span>(wfTOL2018, <span class="dt">file =</span> <span class="st">&quot;wfTOL2018.csv&quot;</span>)</code></pre>
</div>
<div class="section level2">
<h2>再回頭看一下</h2>
<p>天哪～～～重複寫 code 好累啊～～～ Ｑ＿＿＿Ｑ<br />
其實以前有用過流程控制與 formate 之類的說… <del>竟然還給老師了</del><br />
下一次就來研究怎麼在Ｒ裡面做變數取代(是這個詞嗎？)，希望可以改良一下這個一看就是新手寫的、無聊的 code 。</p>
</div>
<div class="section level2">
<h2>學習筆記</h2>
<ol style="list-style-type: decimal">
<li><p>上週五勇敢地抱著進取心問了 Sean 後有大發現：原來 data frame 會希望是雙邊齊長、方方正正的表格喔！我的原始資料本來就是每個欄位不等長的資料說……</p></li>
<li><p>承上，另一個發現是：原來在Ｒ裡面將每個欄位設為變數進行處理是很直覺的啊！（我就直腦筋的想著要整塊一起處理最方便… <del>也許是因為我腦子裡住著兩條蛇？</del>）</p></li>
<li><p>在使用 ‘grep’ 和 ‘gsub’ 時發現原來 <code>\n</code> 會直接對到，不需要使用跳脫字元 (天知道我在這上面鑽研了幾次 Ｔ＿Ｔ)</p></li>
</ol>
<p>想說的話太多了，先這樣好了… （<del>重複寫一樣的 code 殺掉了太多活力與能量了啦</del>）</p>
</div>
